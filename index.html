<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TemplateFx | Dynamic Templating Tool</title>
    <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABmJLR0QAAAByAMbcMWDEAAACkklEQVR42u3b0Q2AIAxAQWs6sUO6Fq6ABkThbgAT2uSlP8Z2nBuwpt0IQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAA4F3Z8dvFeKcQRuACAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAgNvSCGigTPimcAEAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAyXHb8dxrsMu3YBAAIACAAgAIAAAAIACAAgAMBgufDbi/VXCbP8zR5cAIAAAAIACAAgAIAAAAIACAAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgACYAQgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACADwTC789rB+XACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAADflkZAA36tdgEAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAANS5DZwdINbt8ygAAAABJRU5ErkJggg==">
    <style type="text/css">
      html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#428bca;text-decoration:none}a:hover,a:focus{color:#2a6496;text-decoration:underline}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}
      code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}code{padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;white-space:nowrap;border-radius:4px}kbd{padding:2px 4px;font-size:90%;color:#fff;background-color:#333;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,0.25)}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}
      .label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:bold;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.label[href]:hover,.label[href]:focus{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.btn .label{position:relative;top:-1px}.label-default{background-color:#999}.label-default[href]:hover,.label-default[href]:focus{background-color:#808080}.label-primary{background-color:#428bca}.label-primary[href]:hover,.label-primary[href]:focus{background-color:#3071a9}.label-success{background-color:#5cb85c}.label-success[href]:hover,.label-success[href]:focus{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:hover,.label-info[href]:focus{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:hover,.label-warning[href]:focus{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:hover,.label-danger[href]:focus{background-color:#c9302c}
      html { margin: 10px; font-family: Calibri, Geneva, sans-serif; text-align: left; }
      div.content { width: 90% }
      div.title h3 { margin-top: 5px; margin-bottom: 0px }
      div.title h4 { margin-top: 0px }
      th, td { white-space: nowrap; padding: 2px }
      img.screenshot { width: 30% }
      h4.heading { color: #4169e1 }
      span.if { background: #ee82ee }
      span.for { background: #c0a172 }
      span.field { background: #adff2f }
      span.input { background: #c3adff }
      span.input_type { background: #ee82ee }
      span.script { background: #ffc800 }
      span.comment { background: #99ccff }
      span.group { background: #11ccaa }
      span.at { background: #ff7f50 }
      .inline-left { text-align: left }
      .inline-center { text-align: center }
      .block-center { margin-left: auto; margin-right: auto }
    </style>
  </head>
  <body>
    <div class="content block-center">
      <div class="title inline-center">
        <img width="48" height="48" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAABmJLR0QAAAByAMbcMWDEAAACkklEQVR42u3b0Q2AIAxAQWs6sUO6Fq6ABkThbgAT2uSlP8Z2nBuwpt0IQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAA4F3Z8dvFeKcQRuACAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAgNvSCGigTPimcAEAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAAACAAyXHb8dxrsMu3YBAAIACAAgAIAAAAIACAAgAMBgufDbi/VXCbP8zR5cAIAAAAIACAAgAIAAAAIACAAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgACYAQgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACAAgAIAAAAIACADwTC789rB+XACAAAACAAgAIACAAAACAAgAIACAAAACAAgAIACAAADflkZAA36tdgEAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAAAgAIACAAgAAANS5DZwdINbt8ygAAAABJRU5ErkJggg==" alt="Icon" />
        <h3>TemplateFx | Dynamic Templating Tool</h3>
        <h4>by Chris Mason &lt;<a href="mailto:chris@templatefx.org">chris@templatefx.org</a>&gt;</h4>
        
        <h4>Latest Version: 2.57 (Build 16366)<br />Released: 31st December 2017</h4>
      </div>

      <h4 class="heading">1. Introduction</h4>

      <p>TemplateFx is a Dynamic Templating Tool which allows you to generate outputs based on a template and some source data. Its main use is in generating configurations for CLI based devices like Cisco routers and switches. It aims to be portable and platform independent through the use of Java and as such requires a Java Runtime Environment (JRE) of at least version 7 to be installed.</p>

      <p>This document aims to be short as there isn't really a lot to talk about, due to the simplicity of TemplateFx and its hopeful ease of use. However, if you feel something could be made easier or simpler then feedback is welcomed using the email address above.</p>

      <p>Download links for TemplateFx can be found on GitHub at the following location: <a href="https://github.com/chrixm/templatefx/releases" target="_blank">https://github.com/chrixm/templatefx/releases</a><br />All the changes in this release and previous releases can be found within the detailed <a href="changelog.txt" target="_blank">CHANGELOG</a>.</p>

      <h4 class="heading">2. User Interface</h4>

      <p>The TemplateFx user interface consists of the "Console", "IP Calc" and "DataTemplate" tabs and multiple "Output" tabs. The "Console" tab is where STDOUT/STDERR goes and where all console logging is sent. The "IP Calc" tab provides easy access to an IPv4/IPv6 Subnet Calculator with support for DNS resolution of subnets, the "DataTemplate" tab is the main tab where you compose your template and the "Output" tabs are where you see your merged data after clicking on the "Generate Output" button on the toolbar.</p>

      <div class="inline-center">
        <a href="/images/templatefx-screenshot1.png" target="_blank"><img class="screenshot" src="/images/templatefx-screenshot1.png" alt="templatefx-screenshot1.png"></a>&nbsp;&nbsp;&nbsp;
        <a href="/images/templatefx-screenshot2.png" target="_blank"><img class="screenshot" src="/images/templatefx-screenshot2.png" alt="templatefx-screenshot2.png"></a>&nbsp;&nbsp;&nbsp;
        <a href="/images/templatefx-screenshot3.png" target="_blank"><img class="screenshot" src="/images/templatefx-screenshot3.png" alt="templatefx-screenshot3.png"></a>
      </div>

      <p>You have the ability to right click on the various panes to allow you to copy and paste or perform other normal operations. As well as the "File" menu to load and save content, you also have the ability to drag and drop data files and template files into the respective panes.</p>

      <p>The "Group By" list allows you to select one or more of your data fields (using CTRL/&#8984; while clicking to select or deselect entries) to allow grouping of your output data. As an example, if you have configuration that needs to be applied to different interfaces on a series of routers, then you could use this to group by your router identifier and interface identifier, to allow you to group interfaces for the same router in the same output. There is also support for splitting an output into multiple outputs using advanced <code>GROUP</code> syntax that is explained in the "Grouping and Merging" section.</p>

      <h4 class="heading">2.1. Data Pane</h4>

      <p>The data pane is where you enter your raw data that TemplateFx will use within your template. Text that is inserted into the data pane has a couple of restrictions that must be followed:</p>

      <ol>
        <li><p>Data is entered in rows and columns, with the columns separated by tabs or commas - you can't mix and match. In the same sense if you click on "Import Data" from the "File" menu then it expects tab or comma separated data.</p></li>
        <li><p>You must define at least two rows within your data. The first row is considered the header row which allows TemplateFx to map the substitution fields in your template to the data. The only exception, is if you haven't used any template fields within the template plane - this is to support situations where you are just using the template pane and in this unusual situation you may leave the data pane blank.</p></li>
      </ol>

      <p>A nice feature of TemplateFx is its ability to accept data from Microsoft Excel. If you construct your data within Excel then you are able to copy and paste it into the data pane. This is the preferred method of constructing source data as you are able to manipulate and sort the data before pasting it into TemplateFx - however be aware of Excel dropping leading zeroes and converting "x/x/x" syntax into dates by default.</p>

      <p><span class="label label-info">NOTE</span>&nbsp;You will get a warning message if the data pane contains a <code>"</code>, <code>'</code> or <code>\</code> character. This is because TemplateFx doesn't keep track in which context the template fields are being inserted - it could be within the main body of the template or within a dynamic script block within an already quoted string. In some contexts, those characters may need to be escaped (e.g. <code>&lt;? print("&lt;&lt;FIELD&gt;&gt;") ?&gt;</code> when there is already a double quote in the value of <code>&lt;&lt;FIELD&gt;&gt;</code>), and in some they might not. If you aren't using those template fields in a scenario (generally a script block) which might cause a problem then you can ignore this warning.</p>
      
      <h4 class="heading">2.2. Template Pane</h4>

      <p>The template pane is where you enter the text of your template that will be used as the basis for your output. TemplateFx fields are defined through the use of double chevrons (e.g. <code>&lt;&lt;FIELD&gt;&gt;</code>) and once you define them within the template pane, they are added to the "Template Fields" list (fields are highlighted in red if they don't exist in the data pane). When you click on the "Generate Output" button, the fields will be substituted for the values in the source data. In the "Generate Output" dialog you have the option of specifying a label for the output tab.</p>
      
      <p>In the event that a template field hasn't been defined within the source data then you will get a warning message as well as it being highlighted in the output to allow you to easily identify it.</p>

      <h4 class="heading">2.3. Output Pane</h4>

      <p>Every time you click on the "Generate Output" button a new output pane is added as a new tab. This pane allows you to see the merged output with the ability to save it or to zip multiple outputs together into a single archive. If you have selected a field in the "Group By" drop down, then you have the ability to cycle through the different output groups. In the event that TemplateFx detects you are creating a HTML based template then it will give you the option of showing the output in your default browser using the "In Browser" button.</p>

      <p>You also have various different selection options ("Select Line", "Select Block" and "Select Paragraph") by right clicking on the output pane which allows you to easily select blocks to copy. This goes one step further with a feature called "Copy Mode", which is available in the same menu that automatically highlights blocks as you move the mouse over them - this allows you to copy blocks without having to manually select them first.</p>

      <h4 class="heading">2.4. Shortcut Keys</h4>

      <p>TemplateFx defines the following shortcut/accelerator keys that can be used to perform tasks using the keyboard:</p>

      <table class="inline-center">
        <thead>
          <tr>
            <th class="inline-left" style="width: 200px">Action</th>
            <th style="width: 100px">Windows</th>
            <th style="width: 100px">Mac OS</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="inline-left">New</td>
            <td title="Control+N">^N</td>
            <td title="Command+N">&#8984;N</td>
          </tr>
          <tr>
            <td class="inline-left">Load DataTemplate</td>
            <td title="Control+L">^L</td>
            <td title="Command+L">&#8984;L</td>
          </tr>
          <tr>
            <td class="inline-left">Save DataTemplate</td>
            <td title="Control+S">^S</td>
            <td title="Command+S">&#8984;S</td>
          </tr>
          <tr>
            <td class="inline-left">Find and Replace</td>
            <td title="Control+F">^F</td>
            <td title="Command+F">&#8984;F</td>
          </tr>
          <tr>
            <td class="inline-left">Bookmark DataTemplate</td>
            <td title="Control+D">^D</td>
            <td title="Command+D">&#8984;D</td>
          </tr>
          <tr>
            <td class="inline-left">IP Calculator</td>
            <td title="Control+I">^I</td>
            <td title="Command+I">&#8984;I</td>
          </tr>
          <tr>
            <td class="inline-left">Show DataTemplate Pane</td>
            <td title="Control+T">^T</td>
            <td title="Command+T">&#8984;T</td>
          </tr>
          <tr>
            <td class="inline-left">Generate Output</td>
            <td title="Control+G">^G</td>
            <td title="Command+G">&#8984;G</td>
          </tr>
          <tr>
            <td class="inline-left">JavaScript Libraries</td>
            <td title="Control+J">^J</td>
            <td title="Command+J">&#8984;J</td>
          </tr>
          <tr>
            <td class="inline-left">Close Tab</td>
            <td title="Control+W">^W</td>
            <td title="Command+W">&#8984;W</td>
          </tr>
          <tr>
            <td class="inline-left">Help</td>
            <td>F1</td>
            <td>F1</td>
          </tr>
        </tbody>
      </table>

      <h4 class="heading">3. DataTemplates</h4>

      <p>A DataTemplate is a proprietary file format which uses the file extension ".dt" and is used to store a template along with the source data. Instead of having to distribute the template and source data in separate files, you can save it as a DataTemplate, which combines them both together. Warning: The file format isn't text based and if you attempt to edit it outside of TemplateFx then you will screw up the checksum and it won't load.</p>

      <p>However, you do have the option to export a DataTemplate (and import) in plain text - this will include all aspects of the DataTemplate using specific section blocks to differentiate different aspects. This allows you to edit it outside of TemplateFx and then import it later on. On import you don't need to include all sections (e.g. you can have a file with just some "snippet" blocks), which allows you to merge in additional sections into an existing DataTemplate - on import you have the option to either "Replace" (clear everything first) or "Merge" (will overwrite elements that already exist) the contents of the existing DataTemplate. Finally, if you paste in an exported DataTemplate to one of the panes, it will detect the syntax and ask you whether you wish to treat it as a DataTemplate or just text.</p>
      
      <p>The DataTemplate is exported in the following text based format:</p>

      <pre><strong>&lt;templatefx:data&gt;</strong>
DATA
<strong>&lt;/templatefx:data&gt;</strong>

<strong>&lt;templatefx:group_by = </strong>FIELD_1[ || FIELD_2][ || ...]<strong> /&gt;</strong>
      
<strong>&lt;templatefx:snippet = </strong>NAME_1<strong>&gt;</strong>
SNIPPET 1
<strong>&lt;/templatefx:snippet&gt;</strong>

<strong>&lt;templatefx:snippet = </strong>NAME_2<strong>&gt;</strong>
SNIPPET 2
<strong>&lt;/templatefx:snippet&gt;</strong>

<strong>&lt;templatefx:template&gt;</strong>
TEMPLATE
<strong>&lt;/templatefx:template&gt;</strong></pre>

      <p>TemplateFx also supports encrypted DataTemplates by selecting "Encrypt DataTemplate" from the "File" menu. After prompting for a password, the DataTemplate will be fully encrypted when it is saved using AES (Advanced Encryption Standard) encryption in CTR mode using a pseudorandom 16 byte IV and a SHA-256 HMAC for integrity which is performed over the salt, IV and ciphertext. The key size is 128 bits (or you can select 256 bits if you have installed the "Java Cryptography Extension Unlimited Strength Jurisdiction Policy Files") and is generated by combining a pseudorandom 64 byte salt with the password using the PBKDF2 (HMAC-SHA-512) key derivation function with 50,000 iterations. Please ensure you don't forget the password as there is no way to decrypt the DataTemplate without it!</p>

      <h4 class="heading">4. Templates</h4>

      <p>To help demonstrate how a template is constructed let us assume we have the following source data defined within our data pane:</p>

      <pre><span class="comment">ROUTER, INTERFACE, IP, DEST</span>
PE-1A, Gi0/0/0, 192.0.2.1, R1 (Gi0/0)
PE-1A, Gi0/0/1, 192.0.2.5, R2 (Gi0/1)
PE-1A, Gi0/0/2, 192.0.2.9, R3 (Gi0/2)</pre>

      <p>We are going to create a template which configures a series of interfaces based on the data provided within the data pane. You can see in the example below that we have used chevrons to mark where we want the substituted data to be placed:</p>

      <pre>interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
 description ## Connection from <span class="field">&lt;&lt;ROUTER&gt;&gt;</span> (<span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>) to <span class="field">&lt;&lt;DEST&gt;&gt;</span> ##
 ip address <span class="field">&lt;&lt;IP&gt;&gt;</span> 255.255.255.252
 no shutdown
!</pre>

      <p>Once you click on "Generate Output", the data within the template pane is effectively duplicated for each line within your source data with the necessary substitutions taking place - it will produce the following output:</p>

      <pre>interface Gi0/0/0
 description ## Connection from PE-1A (Gi0/0/0) to R1 (Gi0/0) ##
 ip address 192.0.2.1 255.255.255.252
 no shutdown
!

interface Gi0/0/1
 description ## Connection from PE-1A (Gi0/0/1) to R2 (Gi0/1) ##
 ip address 192.0.2.5 255.255.255.252
 no shutdown
!

interface Gi0/0/2
 description ## Connection from PE-1A (Gi0/0/2) to R3 (Gi0/2) ##
 ip address 192.0.2.9 255.255.255.252
 no shutdown
!</pre>

      <h4 class="heading">4.1. Branching and Looping Constructs</h4>

      <h4 class="heading">4.1.1. IF</h4>

      <p>The IF construct is one of the most important features of many languages, templates included. It allows for the conditional use of template text based on a true or false statement. If the statement evaluates to true, the text will be displayed, and if it evaluates to false, it won't.</p>

      <pre><span class="if">&lt;IF (<span class="script">"expression"</span>)&gt;</span>
  ...
<span class="if">&lt;ELSE IF (<span class="script">"expression"</span>)&gt;</span>
  ...
<span class="if">&lt;ELSE IF (<span class="script">"expression"</span>)&gt;</span>
  ...
<span class="if">&lt;ELSE&gt;</span>
  ...
<span class="if">&lt;/IF&gt;</span>
</pre>

      <p>The "expression" will be evaluated by the JavaScript parser, so it needs to be valid JavaScript, however the syntax is relatively simple as demonstrated in the example below (white space is maintained at the beginning and end of IF blocks, but not empty lines).</p>

      <pre>interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
<span class="if">&lt;IF (<span class="script">"<span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>" == "Gi0/0/0"</span>)&gt;</span>
 no shutdown
<span class="if">&lt;/IF&gt;</span>
!</pre>

      <p>In the above example, the block will only be displayed if the "INTERFACE" field equals "Gi0/0/0".</p>

      <h4 class="heading">4.1.2. FOR</h4>

      <p>The FOR construct is also an important feature of many languages, templates included - it is used to support intra-row looping. There are two different syntaxes that are supported for this construct; the first allows you to specify a variable "VAR" and a comma separated list of data values, e.g. <code>"VAL1", "VAL2", ..., "VALn"</code>, the second allows you to specify a variable "VAR" and then use the <code>X TO Y [STEP N]</code> syntax for the values - if "STEP" is omitted then a default value of 1 or -1 will be used depending on the context. It will then duplicate the contents of the FOR block for every entry by substituting <code>{{VAR}}</code> for the value. If there are no entries within the list of data values then the block isn't displayed (white space is maintained at the beginning and end of FOR blocks, but not empty lines). To maintain performance and preserve memory, a maximum iteration limit of 1024 has been imposed.</p>

      <pre><span class="for">&lt;FOR VAR = ["VAL1", "VAL2", ..., "VALn"]&gt;</span>
<span class="for">{{VAR}}</span>
<span class="for">&lt;/FOR&gt;</span>
</pre>

      <p>The following example demonstrates how this could be used to include a series of "ip helper-address" statements on an interface:

      <pre>interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
 ip address <span class="field">&lt;&lt;IP&gt;&gt;</span> 255.255.255.252
<span class="for">&lt;FOR H = ["192.0.2.129", "192.0.2.130"]&gt;</span>
 ip helper-address <span class="for">{{H}}</span>
<span class="for">&lt;/FOR&gt;</span>
 no shutdown
!</pre>

      <p>Once you click on "Generate Output", the following output will be generated where you can see the "ip helper-address" has been duplicated for each entry within the list of data values:</p>
      
      <pre>interface Gi0/0/0
 ip address 192.0.2.1 255.255.255.252
 ip helper-address 192.0.2.129
 ip helper-address 192.0.2.130
 no shutdown
!

interface Gi0/0/1
 ip address 192.0.2.5 255.255.255.252
 ip helper-address 192.0.2.129
 ip helper-address 192.0.2.130
 no shutdown
!

interface Gi0/0/2
 ip address 192.0.2.9 255.255.255.252
 ip helper-address 192.0.2.129
 ip helper-address 192.0.2.130
 no shutdown
!</pre>

      <p>It should be noted that the above could have been easily done without the use of a FOR block as the values were already known. However, the real power comes when you provide the list from the data pane, where it could be different on a per line basis - this concept will be further explained within the "Scripting" section.</p>

      <p>The second type of syntax allows you to do more conventional loops that go from a start value to an end value, with an optional step (where "X" and "Y" could be a number or a character with the smaller value on the left or the right):</p>

      <pre><span class="for">&lt;FOR VAR = ["X" TO "Y" STEP N]&gt;</span>
<span class="for">{{VAR}}</span>
<span class="for">&lt;/FOR&gt;</span>
</pre>

      <p>You are permitted to nest FOR blocks as many times as you want while mixing and matching the syntax - the following primitive example demonstrates an example of this:</p>

      <pre><span class="for">&lt;FOR I = [1 TO 5 STEP 2]&gt;</span>
  <span class="for">&lt;FOR J = [B TO A]&gt;</span>
R = <span class="for">{{I}}</span>:<span class="for">{{J}}</span>
  <span class="for">&lt;/FOR&gt;</span>
<span class="for">&lt;/FOR&gt;</span>
</pre>

      <p>Once you click on "Generate Output", the following output will be generated:</p>
      
      <pre>R = 1:B
R = 1:A
R = 3:B
R = 3:A
R = 5:B
R = 5:A</pre>

      <h4 class="heading">4.2. Snippets</h4>

      <p>To allow the re-using of templating components, TemplateFx also supports the notion of including the contents of snippets into a template. This allows a common piece of text to be written once but used multiple times in the same template - any modifications to the common snippet is seen in all occurrences within the template. Snippets are defined in the snippet panel and can then be referenced in the main template using the following syntax:</p>

      <pre>ipv4 access-list ACL-IN
 permit tcp host 192.0.2.1 gt 1023 host 192.0.2.2 eq 179
 permit tcp host 192.0.2.2 eq 179 host 192.0.2.1 gt 1023
 <span class="at">%{ACL-STANDARD}%</span>
 deny ip any any
!</pre>

      <p>The above <code>%{NAME}%</code> syntax tells TemplateFx to replace it with the contents of the snippet named "ACL-STANDARD". This directive is processed first before any substitutions have taken place which means any valid template syntax can be used within a snippet. The scope of snippets is within the DataTemplate and when the DataTemplate is saved or loaded then the snippets are included with it. There are two Snippets which have a special meaning (<code>~HEADER</code> and <code>~FOOTER</code>), which are automatically added to either the start or the end of your template - hopefully self-explanatory.</p>

      <p>Snippets also support parsing of an optional parameter by specifying parenthesis after the snippet name (i.e. <code>%{NAME("&lt;string&gt;")}%</code>) when you reference it in your template, which can then be accessed in the snippet via the <code>{%}</code> markup. Any occurrences of <code>{%}</code> in the snippet will be replaced with "&lt;string&gt;" - this could be used to pass through a literal string which allows a different response to be produced depending on what is passed through. However, care should be taken when passing through special constructs (i.e. <code>&lt;?= ?&gt;</code>) as they will be evaluated as part of the snippet body and thus need to be valid in the context they are being evaluated.</p>

      <p>The final use of snippets is a bit of a hack, but allows DataTemplate specific options to be defined and saved within the DataTemplate. The following "special" snippets are currently supported:</p>

      <ul>
        <li><code>~HEADER</code> - The contents of this snippet are automatically added to the start of your template on output generation.</li><br />
        <li><code>~NOPROMPT</code> - If this snippet exists then TemplateFx won't prompt you when you click on "Generate" - it will assume the defaults and begin output generation.</li><br />
        <li><code>~GENONLOAD</code> - If this snippet exists then it will automatically start output generation when the DataTemplate is loaded. A specific use case is using TemplateFx via another tool, which could generate a temporary file containing a DataTemplate export that was specified on the command line when starting TemplateFx - the output would then be automatically generated and presented to the user.</li><br />
        <li><code>~FILTER</code> - This snippet is used to specify the filtering and sorting criteria that should be applied to the data before generation - see the section "Filtering and Sorting".</li><br />
        <li><code>~FOOTER</code> - The contents of this snippet are automatically added to the end of your template on output generation.</li>
      </ul>

      <h4 class="heading">4.3. Including External Files</h4>

      <p>As well as snippets, TemplateFx also supports including content from external text files that are located on a locally accessible file system. This approach might be used over snippets if you have content which is shared amongst multiple templates. External files are included using the following syntax:</p>

      <pre><span class="at">%INCLUDE "\\uk\ukroot\templates\site-build-template.txt"</span>
</pre>

      <p>The above syntax instructs TemplateFx to include the contents of "\\uk\ukroot\templates\site-build-template.txt" into the template at this point. The current order of operation means that snippets are imported into the template before includes, which means snippets can include external files. A maximum filesize of 262,144 bytes is currently enforced per external file.</p>

      <h4 class="heading">4.4. User Input</h4>

      <p>There might be some situations where you don't want to store dynamic or sensitive data within the actual DataTemplate. In these situations, TemplateFx provides the ability to request data from the user as the output is being generated through the use of input blocks using the <code>&lt;[ ... ]&gt;</code> or <code>&lt;[ ... ][0|1|2]&gt;</code> syntax. By default it will present the user with a multi-line input box, which allows you to enter data which would normally be difficult to do so using the "Data" pane. The second format of syntax allows a numerical type to be specified as per the list below:</p>

      <p><strong>0</strong><br />
      This is the default and indicates that a multi-line input box will be presented to the user.

      <p><strong>1</strong><br />
      This indicates a single-line input box will be presented to the user - the input will be accepted when the user clicks "OK" or presses "&lt;ENTER&gt;".

      <p><strong>2</strong><br />
      This indicates a single-line password input box will be presented to the user - the input will be masked and it will be accepted when the user clicks "OK" or presses "&lt;ENTER&gt;".

      <pre><span class="comment"># Use Multi-Line Input Box (Implicit Type 0)</span>
<span class="input">&lt;[ Enter Data: ]&gt;</span>

<span class="comment"># Use Multi-Line Input Box (Explicit Type 0)</span>
<span class="input">&lt;[ Enter Data: ][<span class="input_type">0</span>]&gt;</span>

<span class="comment"># Use Single-Line Input Box (Explicit Type 1)</span>
<span class="input">&lt;[ Enter Username: ][<span class="input_type">1</span>]&gt;</span>

<span class="comment"># Use Single-Line Password Input Box (Explicit Type 2)</span>
<span class="input">&lt;[ Enter Password: ][<span class="input_type">2</span>]&gt;</span>
</pre>

      <p>Regardless of how many data rows you have, the user will be prompted once per input before output generation commences (if the same input is requested multiple times then the value is cached). The value provided by the user will then replace the <code>&lt;[ ... ]&gt;</code> block.</p>

      <h4 class="heading">4.5. Comments</h4>

      <p>There are two types of comments which can be used within a template (and snippets), both of which must be used at the beginning of a line as TemplateFx doesn't presently support end of line comments. The first is a template comment and uses the <code>#</code> syntax to comment out a line in a template - this results in the line being completely ignored and not appearing in your output (if you require a <code>#</code> at the start of a line then you can escape it using <code>##</code> instead). The second type of comment, which uses the <code>!</code> syntax is used to supplement your output with comments:</p>

      <pre><span class="comment"># This comment won't appear in your output and ignores &lt;&lt;FIELDS&gt;&gt;, etc.</span>
<span class="comment">! This comment will appear in your output and doesn't ignore <span class="field">&lt;&lt;FIELDS&gt;&gt;</span>, etc.</span>
</pre>

      <p>You can also indicate that you want to highlight the entire row, which is done by using <code>#-</code> and <code>!-</code> respectively:</p>

      <pre><span style="display: inline-block; width: 100%;" class="comment">#- Using a hyphen (-) after the comment symbol will highlight the entire row.</span>
</pre>

      <h4 class="heading">5. Filtering and Sorting</h4>

      <p>TemplateFx provides the capability to filter and sort the data before an output is generated. To use this feature you need to create a snippet called <code>~FILTER</code> and fill it with your filtering and sorting criteria based on the following syntax (case insensitive comparison is performed):</p>

      <pre>FIELD =~ REGEX    <span class="comment"># FIELD CONTAINS REGEX</span>
FIELD !~ REGEX    <span class="comment"># FIELD DOESN'T CONTAIN REGEX</span>
FIELD == [VALUE]  <span class="comment"># FIELD EQUALS VALUE</span>
FIELD != [VALUE]  <span class="comment"># FIELD DOESN'T EQUAL VALUE</span></pre>

      <p>Multiple criteria on different lines will be treated as "AND" and multiple criteria on the same line separated by commas will be treated as "OR". As well as filtering, it also supports the ability to sort the data using one or more fields:</p>

      <pre>SORT FIELD_1[ ASC| DESC][, FIELD_2[ ASC| DESC]][, ...]</pre>
     
      <p>By default it will sort the data in ascending order but allows you to specify "ASC" for ascending or "DESC" for descending at the end of every sort field. Multiple sort fields can be specified by adding them onto the same line separated by commas.</p>

      <pre><span class="comment">A, B, C</span>
1, 1, X
Y, 3, Z
2, 1,
1, F, Y
Z, A, W</pre>

      <p>Using the above data as an example with the following <code>~FILTER</code> snippet:</p>

      <pre>C != 
A =~ [0-9], B =~ [A-Z]
SORT A DESC, C</pre>

      <p>The above is the equivalent of ("C" doesn't equal "") AND (("A" contains a number) OR ("B" contains a letter)) and then sort by "A" in descending order and then by "C" in ascending order, which results in the following data being used when generating outputs:</p>

      <pre><span class="comment">A, B, C</span>
Z, A, W
1, 1, X
1, F, Y</pre>

      <h4 class="heading">6. Grouping</h4>

      <p>There are two features which allow you to control how the outputs are generated: "Group By" and Advanced Dynamic Grouping. By default TemplateFx will generate a single output with each row's output one after another. To demonstrate the difference between these features, we are going to use the following data source as an example:</p>
      
      <pre><span class="comment">ROUTER, INTERFACE</span>
UKPE-ABC-01, Gi0/1
UKPE-ABC-01, Gi0/2
UKPE-ABC-01, Gi0/3
UKPE-ABC-02, Gi0/1
UKPE-ABC-02, Gi0/2
UKPE-ABC-03, Gi0/1</pre>

      <p>With none of the features used, we will end up with one large output, with the template output for each of the 6 rows. If we select "ROUTER" as our "Group By" field then TemplateFx will generate outputs in the same way as before, but it will combine outputs with the same value for "ROUTER" into a single output - this will result in 3 separate outputs (one per unique "ROUTER" value). As it is processing each row, it basically checks to see if we have generated an output with the same group value before, if we have then it appends it to the same output and if not then it starts a new output.</p>

      <p>The Advanced Dynamic Grouping feature allows you to expand rows into multiple outputs by defining different outputs in the same template as well as using dynamic values for group names. Let's take the following template as an example:</p>

      <pre><span class="group">&lt;GROUP = <span class="script">&lt;?= "<span class="field">&lt;&lt;ROUTER&gt;&gt;</span>-A".toLowerCase() ?&gt;</span>&gt;</span>
interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
 shutdown
!
<span class="group">&lt;/GROUP&gt;</span>

<span class="group">&lt;GROUP = <span class="field">&lt;&lt;ROUTER&gt;&gt;</span>-B&gt;</span>
interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
 shutdown
!
<span class="group">&lt;/GROUP&gt;</span></pre>

      <p>The above example will result in two outputs for each unique device (six in total) - one for the "-A" device based on the ROUTER column (but dynamically converted to lowercase first) and one for the "-B" device, also derived from the "ROUTER" column. Anything outside of those <code>GROUP</code> sections will remain in the original output - the purpose of <code>GROUP</code> sections is to move output from the original output into a new output. TemplateFx doesn't support nested <code>GROUP</code> sections as they don't make a lot of sense.</p>

      <p>It should also be noted that neither of these features modify the order of the data source, the data is processed in the order provided - any sorting should be done before the data is entered into TemplateFx.</p>

      <h4 class="heading">7. Scripting</h4>

      <p>For the more advanced users who want to do more than just simple substitution, TemplateFx has the ability to interpret dynamic templates which are written using JavaScript. This User Guide assumes you have a basic understanding of JavaScript, but if this isn't the case then the web (<a href="http://lmgtfy.com/?q=JavaScript" target="_blank">http://lmgtfy.com/?q=JavaScript</a>) has a large amount of information on it.</p>

      <p>TemplateFx supports the following different syntax within a template to support dynamic content:</p>

      <dl>
        <dt><strong>&lt;? ... ?&gt;</strong></dt>
        <dd>
          <p>This is used to define a dynamic content block where the contents of the block between the <code>&lt;? ... ?&gt;</code> will be evaluated through the JavaScript parser and any output will be substituted. For the purpose of this example we are going to modify our source data to demonstrate how we can use dynamic content to generate BGP configurations:</p>

          <pre><span class="comment">ROUTER, LOCATION, INTERFACE, PEER_IP</span>
PEXCD1A, DEV, Gi0/0/0/1, 192.0.2.2
PEXCD1B, DEV, Gi0/0/0/1, 192.0.2.6
PEXAY1A, PROD, Te0/7/0/1, 192.0.2.66
PEXAY1B, PROD, Te0/7/0/1, 192.0.2.70</pre>
       
          <p>The below example will demonstrate how to generate some BGP configuration from the source data above. It will determine the BGP AS (Autonomous System) number based on the "LOCATION" field as well as working out the suffix for the RD (Route Distinguisher) based on the "ROUTER" field (it will look to see if the router name ends in "A" or not to determine the correct suffix):</p>

          <pre><span class="comment">! </span><span class="field">&lt;&lt;ROUTER&gt;&gt;</span>
<span class="script">&lt;?
 var BGP_AS = ("<span class="field">&lt;&lt;LOCATION&gt;&gt;</span>" == "DEV") ? "64512" : "37119";
 var RD_SUFFIX = ("<span class="field">&lt;&lt;ROUTER&gt;&gt;</span>".match(/A$/)) ? "01" : "02";
?&gt;</span>

router bgp <span class="script">&lt;? print(BGP_AS) ?&gt;</span>
 vrf TEST
  rd <span class="script">&lt;? print(BGP_AS) ?&gt;</span>:100<span class="script">&lt;? print(RD_SUFFIX) ?&gt;</span>
  address-family ipv4 unicast
  !
  neighbor <span class="field">&lt;&lt;PEER_IP&gt;&gt;</span>
   remote-as 65000
   address-family ipv4 unicast
    maximum-prefix 100 80 warning-only
    soft-reconfiguration inbound always
   !
  !
 !
!</pre>

          <p>Once you submit the data, it will produce the following output:</p>

          <pre><span class="comment">! PEXCD1A</span>

router bgp 64512
 vrf TEST
  rd 64512:10001
  address-family ipv4 unicast
  !
  neighbor 192.0.2.2
   remote-as 65000
   address-family ipv4 unicast
    maximum-prefix 100 80 warning-only
    soft-reconfiguration inbound always
   !
  !
 !
!


<span class="comment">! PEXCD1B</span>

router bgp 64512
 vrf TEST
  rd 64512:10002
  address-family ipv4 unicast
  !
  neighbor 192.0.2.6
   remote-as 65000
   address-family ipv4 unicast
    maximum-prefix 100 80 warning-only
    soft-reconfiguration inbound always
   !
  !
 !
!


<span class="comment">! PEXAY1A</span>

router bgp 37119
 vrf TEST
  rd 37119:10001
  address-family ipv4 unicast
  !
  neighbor 192.0.2.66
   remote-as 65000
   address-family ipv4 unicast
    maximum-prefix 100 80 warning-only
    soft-reconfiguration inbound always
   !
  !
 !
!


<span class="comment">! PEXAY1B</span>

router bgp 37119
 vrf TEST
  rd 37119:10002
  address-family ipv4 unicast
  !
  neighbor 192.0.2.70
   remote-as 65000
   address-family ipv4 unicast
    maximum-prefix 100 80 warning-only
    soft-reconfiguration inbound always
   !
  !
 !
!</pre>
        </dd>
        <dt><strong>&lt;?= ... ?&gt;</strong></dt>
        <dd>
          <p>This is used as shorthand to <code>&lt;? print(...) ?&gt;</code>, where the <code>&lt;?=</code> is used to tell TemplateFx that we want to use the value of the variable. We could write some of the example above using the following syntax instead of the print statements:</p>

          <pre>router bgp <span class="script">&lt;?= BGP_AS ?&gt;</span>
 vrf TEST
  rd <span class="script">&lt;?= BGP_AS ?&gt;</span>:100<span class="script">&lt;?= RD_SUFFIX ?&gt;</span>
 !
!</pre>

          <p>To demonstrate some of the more powerful uses of this construct, if we revisit our FOR example above and see how we can update it to allow the user to provide the list of values within the source data. For the purpose of this example we have updated our source data to include an additional column called "HELPERS" as well as changing our "IP" field to the base "IP_SUBNET":</p>

          <pre><span class="comment">ROUTER, INTERFACE, IP_SUBNET, DEST, HELPERS</span>
PE-1A, Gi0/0/0, 192.0.2.0, R1 (Gi0/0), 192.0.2.129; 192.0.2.130; 192.0.2.131
PE-1A, Gi0/0/1, 192.0.2.4, R2 (Gi0/1)
PE-1A, Gi0/0/2, 192.0.2.8, R3 (Gi0/2), 10.254.0.1</pre>

          <p>If we now update our original template to use the <code>&lt;?= ... ?&gt;</code> syntax we can see how this becomes a much more powerful construct:</p>

          <pre>interface <span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>
 ip address <span class="script">&lt;?= ip("<span class="field">&lt;&lt;IP_SUBNET&gt;&gt;</span>", +1) ?&gt;</span> 255.255.255.252
<span class="for">&lt;FOR H = [<span class="script">&lt;?= "<span class="field">&lt;&lt;HELPERS&gt;&gt;</span>".split("; ") ?&gt;</span>]&gt;</span>
 ip helper-address <span class="for">{{H}}</span>
<span class="for">&lt;/FOR&gt;</span>
 no shutdown
!</pre>

          <p>First off we are now using the built-in <code>ip()</code> function to derive the IP address of the interface - the <code>ip()</code> function is being used to add a single IP address to the base value. The JavaScript <code>split()</code> function is being used to derive the list of data from a variable provided within the data set. If we click on "Generate Output" we will get the following output:</p>

          <pre>interface Gi0/0/0
 ip address 192.0.2.1 255.255.255.252
 ip helper-address 192.0.2.129
 ip helper-address 192.0.2.130
 ip helper-address 192.0.2.131
 no shutdown
!

interface Gi0/0/1
 ip address 192.0.2.5 255.255.255.252
 no shutdown
!

interface Gi0/0/2
 ip address 192.0.2.9 255.255.255.252
 ip helper-address 10.254.0.1
 no shutdown
!</pre>
        </dd>
      </dl>

      <p><span class="label label-warning">WARNING</span>&nbsp;The JavaScript parser allows you to reference Java classes (e.g. <code>java.math.BigInteger</code>) from within JavaScript - this is called Live Connect. Although JavaScript doesn't permit access to the local file system, Java does and could allow a malicious user to send you a template that did naughty things - this is the same principal as someone sending you an Excel sheet with a malicious macro. You need to be aware of this and be cautious if you ever receive a template or DataTemplate from someone you don't know or trust.</p>

      <h4 class="heading">7.1. Built-In JavaScript Variables</h4>

      <p>As well as the standard JavaScript syntax there is also a series of built-in variables that are included with TemplateFx. These will be expanded with future versions of TemplateFx, but for the time being here is the current list:</p>

      <dl>
        <dt><strong>globals[]</strong></dt>
        <dd>
          <p>This variable provides a mechanism to store persistent data across rows - it is an associative array with global scope, which you use by adding elements. The following example demonstrates how we can store the value of the field "XYZ" from the current row as <code>globals["xyz"]</code> so we can reference it when processing the next row.</p>
<pre><span class="script">&lt;?
  if (typeof globals["xyz"] !== "undefined") {
    if ("<span class="field">&lt;&lt;XYZ&gt;&gt;</span>" !== globals["xyz"]) {
      console.log("values are different");
    }
  }
  globals["xyz"] = "<span class="field">&lt;&lt;XYZ&gt;&gt;</span>";
?&gt;</span>
</pre>
          <p>First we make sure it is defined and then we compare the stored value to the value of the current row. If the values are different then we log a message to the console.</p>
        </dd>
        <dt><strong>templatefx.version</strong></dt>
        <dd>
          <p>This variable returns the current TemplateFx version as a string (e.g. "2.38").</p>
        </dd>
        <dt><strong>templatefx.build</strong></dt>
        <dd>
          <p>This variable returns the current TemplateFx build number as a string (e.g. "14222").</p>
        </dd>
        <dt><strong>templatefx.jre_version</strong></dt>
        <dd>
          <p>This variable returns the current Java (JRE) version as a string (e.g. "1.7.0_79").</p>
        </dd>
        <dt><strong>templatefx.group_start</strong></dt>
        <dd>
          <p>This variable will be set to true if the row is the first in the group. This allows you to add text to your template that would be included at the beginning of every output. An example is included below:</p>
          <pre><span class="if">&lt;IF (<span class="script">templatefx.group_start</span>)&gt;</span>
<span class="comment">!-----</span>
<span class="comment">! @ </span><span class="field">&lt;&lt;ROUTER&gt;&gt;</span>
<span class="comment">!-----</span>
<span class="if">&lt;/IF&gt;</span>
</pre>
          <p><span class="label label-info">NOTE</span>&nbsp;This is only applicable for "Group By" groups and doesn't work with Advanced Dynamic Grouping where <code>GROUP</code> sections have been added to the template. In this scenario you could use the <code>templatefx.first()</code> function (syntax further down) to determine whether this is the first occurrence of this "ROUTER" field:</p>
          <pre><span class="group">&lt;GROUP = "<span class="field">&lt;&lt;ROUTER&gt;&gt;</span>"&gt;</span>
<span class="if">&lt;IF (<span class="script">templatefx.first("ROUTER")</span>)&gt;</span>
<span class="comment">! @ </span><span class="field">&lt;&lt;ROUTER&gt;&gt;</span>
<span class="if">&lt;/IF&gt;</span>
DATA
<span class="group">&lt;/GROUP&gt;</span>
</pre>
        </dd>
        <dt><strong>templatefx.group_end</strong></dt>
        <dd>
          <p>This variable is the opposite of the <code>templatefx.group_start</code> where it will be set to true if the row is the last in the group. This allows you to add text to your template that would be included at the end of every output.</p>
          <p><span class="label label-info">NOTE</span>&nbsp;This is only applicable for "Group By" groups and doesn't work with Advanced Dynamic Grouping where <code>GROUP</code> sections have been added to the template. In this scenario you could use the <code>templatefx.last()</code> function (syntax further down) to determine whether this is the last occurrence of these "ROUTER" and "INTERFACE" fields:</p>
          <pre><span class="group">&lt;GROUP = "<span class="field">&lt;&lt;ROUTER&gt;&gt;</span>-<span class="field">&lt;&lt;INTERFACE&gt;&gt;</span>"&gt;</span>
<span class="if">&lt;IF (<span class="script">templatefx.last("ROUTER||INTERFACE")</span>)&gt;</span>
<span class="comment">! ...</span>
<span class="if">&lt;/IF&gt;</span>
DATA
<span class="group">&lt;/GROUP&gt;</span>
</pre>
        </dd>
        <dt><strong>templatefx.row</strong></dt>
        <dd>
          <p>This variable returns the current row within the data set.</p>
        </dd>
        <dt><strong>templatefx.rows</strong></dt>
        <dd>
          <p>This variable returns the total amount of rows within the data set.</p>
        </dd>
        <dt><strong>templatefx.output</strong></dt>
        <dd>
          <p>This variable contains the output from the template as it is being generated - as the template is processed, the contents of this variable will dynamically change. If you check this variable at the end of your template then it will contain the finished output. This is useful if you want to validate anything in the output (i.e. search through the output and find all the IP addresses to check they all have a valid host entry in DNS). Please refrain from trying to update the output using this variable as bad things could happen - please see the <code>add_output_mutation()</code> function for changing the output post generation.</p>
        </dd>
        <dt><strong>templatefx.data[row][column]</strong></dt>
        <dd>
          <p>This variable is a multi-dimensional array of the actual data with the headers in row "0". This allows you to access the raw data from whatever row you are currently processing.</p>
        </dd>
        <dt><strong>templatefx.first("field_1[ || field_2]")</strong></dt>
        <dd>
          <p>This variable is actually a JavaScript function and has a similar purpose to <code>templatefx.group_start</code>. It allows you to determine if this is the first time you have seen this particular field value. It will return true if this row of data is the first time this or these field values occur (the "field" variable is case insensitive). It also supports specifying multiple fields delimited by "||" if you wish to check if this is the first time you have seen this specific combination of values together.</p>
        </dd>
        <dt><strong>templatefx.last("field_1[ || field_2]")</strong></dt>
        <dd>
          <p>This variable is actually a JavaScript function and has a similar purpose to <code>templatefx.group_end</code>. It allows you to determine if this is the last time you will see this particular field value. It will return true if this row of data is the last time this or these field values occur (the "field" variable is case insensitive). It also supports specifying multiple fields delimited by "||" if you wish to check if this is the last time you have seen this specific combination of values together.</p>
        </dd>
        <dt><strong>templatefx.field("field")</strong></dt>
        <dd>
          <p>This function provides an alternative method of accessing the field values (the "field" variable is case insensitive) instead of using the <code>&lt;&lt;FIELD&gt;&gt;</code> syntax. This has been added for a specific use-case as there was no way to access a field value dynamically, the <code>&lt;&lt;FIELD&gt;&gt;</code> syntax doesn't support any variable or script section between the chevrons (i.e. <code>&lt;&lt;{{F}}&gt;&gt;</code>). By using this function the following is now possible:</p>

          <pre><span class="for">&lt;FOR F = ["ROUTER", "INTERFACE", "STATE"]&gt;</span>
<span class="for">{{F}}</span> has a value of <span class="script">&lt;?= templatefx.field("<span class="for">{{F}}</span>") ?&gt;</span> - equivalent of <span class="field">&lt;&lt;{{F}}&gt;&gt;</span> which isn't supported.
<span class="for">&lt;/FOR&gt;</span>
</pre>
        </dd>
      </dl>

      <h4 class="heading">7.2. Built-In JavaScript Functions</h4>

      <p>In addition to the built-in variables, there is also a series of built-in functions that are included with TemplateFx. These will be expanded with future versions of TemplateFx, but for the time being here is the current list:</p>

      <dl>
        <dt><strong>counter (["key"], [increment], [start])</strong></dt>
        <dd>
          <p>This function provides a counter which will produce a series of numbers in the given sequence. If the "key" is omitted or passed as "null" then the counter is reset back to 0 (or "start") for every row. If a "key" is provided then the counter is persistent across rows. Every time you call the function with the same "key" then it will increment the counter and return the number. Different persistent counters can be created using different "key" values. There is an optional "increment" parameter which allows you to specify a different increment as opposed to the default of 1. There is also an optional "start" parameter which allows you to specify a different start number as opposed to the default of 1. The following example demonstrates both of these parameters to produce a positive and negative counter:</p>
<pre><span class="comment"># This will produce a positive sequence of 0, 5, 10, 15, 20, etc - it will persist across rows using key "id"</span>
<span class="script">&lt;?= counter("id", 5, 0) ?&gt;</span>

<span class="comment"># This will produce a negative sequence of 0, -5, -10, -15, -20, etc - it will be reset to 0 for every row</span>
<span class="script">&lt;?= counter(null, -5, 0) ?&gt;</span>

<span class="comment"># This will produce a positive sequence of 1, 2, 3, 4, 5, etc - it will be reset to 1 for every row</span>
<span class="script">&lt;?= counter() ?&gt;</span>
</pre>
        </dd>
        <dt><strong>cancel (["message"])</strong></dt>
        <dd>
          <p>This function provides a way to cancel processing a template if something isn't right. This could be if an invalid value has been specified in the data source or if a key field hasn't been filled in correctly. An optional "message" can be provided to give the user more information about why processing was cancelled. The first time the function is executed, the whole processing is stopped.</p>
        </dd>
        <dt>
          <strong>ip ("ip", number, [ipv6format])</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 address (doesn't support IPv4-mapped IPv6 addresses) and adds or subtracts a number of IP addresses from the value. If it is an IPv6 address then you can specify an optional third parameter which allows you to specify the presentation format of the returned IPv6 address, using one of the following values:</p>

          <p><strong>ipv6format = 0 || null</strong><br />
          This, or the default if omitted, will output the address using the <a href="http://tools.ietf.org/html/rfc4291" target="_blank">RFC4291</a> preferred format of "x:x:x:x:x:x:x:x" (i.e. 2001:db8:0:0:8:800:200c:417a), where the 'x's are one to four hexadecimal digits of the eight 16-bit pieces of the address with leading zeroes omitted.</p>

          <p><strong>ipv6format = 1</strong><br />
          This will output the address using a special compressed format (i.e. 2001:db8::8:800:200c:417a), which allows you to replace long strings of zero bits with "::". The use of "::" indicates one or more groups of 16 bits of zeroes. The "::" can only appear once in an address and should be the longest run of groups of zeroes. The "::" can also be used to compress leading or trailing zeroes in an address.</p>

          <p><strong>ipv6format = 2</strong><br />
          This will output the address using the full expanded format (i.e. 2001:0db8:0000:0000:0008:0800:200c:417a).</p>

          <p>To demonstrate this function, some examples are provided below:</p>
          
<pre><span class="comment"># Obtain the IP address before "192.0.2.10" (i.e. 192.0.2.9)</span>
<span class="script">&lt;?= ip("192.0.2.10", -1) ?&gt;</span>

<span class="comment"># Convert the IPv6 address "2001:0db8:0000:0000:0008:0800:200c:417a" into compressed form (i.e. 2001:db8::8:800:200c:417a)</span>
<span class="script">&lt;?= ip("2001:0db8:0000:0000:0008:0800:200c:417a", 0, 1) ?&gt;</span>

<span class="comment"># Add 32 to the IPv6 address "2001:db8::" and output in preferred form (i.e. 2001:db8:0:0:0:0:0:20)</span>
<span class="script">&lt;?= ip("2001:db8::", 32) ?&gt;</span></pre>
        </dd>
        <dt>
          <strong>insubnet ("subnet", "ip")</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes a subnet in CIDR format (i.e. "address/mask") and returns true if the passed IPv4 or IPv6 address is in the subnet or false if it isn't. The following example verifies if "2001:db8::1" is contained within "2001:db8::/32":</p>
<pre><span class="if">&lt;IF (<span class="script">insubnet("2001:db8::/32", "2001:db8::1")</span>)&gt;</span>
  ...
<span class="if">&lt;/IF&gt;</span>
</pre>
        </dd>
        <dt>
          <strong>ipsplit ("subnet", "cidr_mask" | min_subnets)</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
        <p>This function is used to split up a subnet into smaller subnets - the subnet parameter is provided in CIDR format (i.e. "192.0.2.0/24" or "2001:db8::/32") and the second parameter can be specified in one of two ways. The first way is by specifying a CIDR mask of the smaller subnets (e.g. "/mask") and the second is by specifying the minimum number of subnets you want (this number will be rounded up to the nearest power of 2 - e.g. 5 will become 8). The function will return "null" if an error occurs, the string "{mask overflow}" if you have used too many bits between the masks (you can't have more than 16 bits between subnet and mask), "{number overflow}" if you have used too many bits when specifying a minimum number of subnets, or an array of all the subnets on success. The following example will output all the "/29" subnets in "192.0.2.0/26" (i.e. 8 subnets) - one per row as we join the returned array using a newline character:</p>
<pre><span class="script">&lt;?= ipsplit("192.0.2.0/26", "/29").join("\n") ?&gt;</span></pre>
          <p>To demonstrate the same by specifying the minimum number of subnets, we can specify 8 as the second parameter, but using an IPv6 address this time - this will return "/35" subnets as there are 8 of them to a "/32" subnet:</p>
<pre><span class="script">&lt;?= ipsplit("2001:db8::/32", 8).join("\n") ?&gt;</span></pre>
          <p>To be able to split a subnet into smaller subnets the "cidr_mask" should be longer than the mask on the "subnet" (and have 10 bits or less between them). However, if you specify a shorter mask as your "cidr_mask" then it will return the supernet instead (i.e. using "192.0.2.0/24" with a "cidr_mask" of "/16" will return "192.0.0.0/16"). In the same sense you can specify a negative number to provide a supernet (i.e. using "192.0.2.0/28" with the minimum number of subnets as -8 will return "192.0.2.0/25").</p>
        </dd>
        <dt>
          <strong>range2cidr ("range")</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
        <p>This function is used to convert an IP address range into the smallest number of CIDR subnets to cover the entire range. The "range" parameter specifies a start and end address (e.g. "192.0.2.1-192.0.2.137" or "2001:db8::-2001:db8::ABC") and will return an array of subnets or "null" if you have tried to do something stupid. The following example will output all the subnets between "192.0.2.87" and "192.0.2.177" - one per row as we join the returned array using a newline character:</p>
<pre><span class="script">&lt;?= range2cidr("192.0.2.87-192.0.2.177").join("\n") ?&gt;</span></pre>
        <p>This results in the following output:</p>
<pre>192.0.2.87/32
192.0.2.88/29
192.0.2.96/27
192.0.2.128/27
192.0.2.160/28
192.0.2.176/31
</pre>
        </dd>
        <dt>
          <strong>network ("cidr", [return_mask])</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 prefix in CIDR format (i.e. "192.0.2.13/24" or "2001:db8::8:800:200c:417a/64") and returns the network address. The function will return "null" if an error occurs, an invalid parameter is detected. In the above example it will return the string "192.0.2.0" for IPv4 and "2001:db8:0:0:0:0:0:0" for IPv6. By default it doesn't return the CIDR mask, but there is an optional parameter "return_mask", which if set to "true" will return it using CIDR notation.</p>
        </dd>
        <dt>
          <strong>ipfirst ("cidr")</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 prefix in CIDR format (i.e. "192.0.2.13/24" or "2001:db8::8:800:200c:417a/64") and returns the first usable address of the subnet. The function will return "null" if an error occurs or an invalid parameter is detected.</p>
        </dd>
        <dt>
          <strong>iphosts ("cidr", [nwbc])</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 prefix in CIDR format (i.e. "192.0.2.13/24" or "2001:db8::8:800:200c:417a/64") and returns (as an array) all the usable addresses of the subnet. The function will return "null" if an error occurs or an invalid parameter is detected. By default it doesn't return the "network" and "broadcast" address of IPv4 subnets, but there is an optional parameter "nwbc", which if set to "true" will return them.</p>
        </dd>
        <dt>
          <strong>iplast ("cidr")</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 prefix in CIDR format (i.e. "192.0.2.13/24" or "2001:db8::8:800:200c:417a/64") and returns the last usable address of the subnet. The function will return "null" if an error occurs or an invalid parameter is detected.</p>
        </dd>
        <dt>
          <strong>broadcast ("cidr")</strong>
          <span class="label label-danger">IPv4 Only</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 prefix (there is no concept of a broadcast in IPv6) in CIDR format (i.e. "192.0.2.13/24") and returns the broadcast address. The function will return "null" if an error occurs, an invalid parameter is detected or if the mask length doesn't support a broadcast address (i.e. /31 or /32).</p>
        </dd>
        <dt>
          <strong>smask ("cidr", [inverse])</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 or IPv6 prefix in CIDR format (i.e. "192.0.2.13/24" or "2001:db8::8:800:200c:417a/64") and returns the subnet mask (e.g. "255.255.255.0" or "ffff:ffff:ffff:ffff::") or for IPv4 addresses only, the inverse/wildcard mask (e.g. "0.0.0.255") if the optional parameter "inverse" is true. The function will return "null" if an error occurs or if an invalid parameter is detected.</p>
        </dd>
        <dt>
          <strong>ip2long ("ip")</strong>
          <span class="label label-danger">IPv4 Only</span>
        </dt>
        <dd>
          <p>This function takes an IPv4 address and converts it into a long.</p>
        </dd>
        <dt>
          <strong>long2ip (long)</strong>
          <span class="label label-danger">IPv4 Only</span>
        </dt>
        <dd>
          <p>This function takes a long and converts it into an IPv4 address.</p>
        </dd>
        <dt>
          <strong>nslookup ("query", [response_type])</strong>
          <span class="label label-danger">IPv4</span> + <span class="label label-primary">IPv6</span>
        </dt>
        <dd>
          <p>This function performs a forward or reverse DNS lookup - for reverse DNS lookups it takes an IPv4 or IPv6 address (doesn't support IPv4-mapped IPv6 addresses), converts it to a PTR record, then attempts to resolve it and returns the hostname as a string (entries are separated using a semi-colon if multiple entries exist) on success or "null" on failure - the "response_type" field is ignored on these type of requests. For forward DNS lookups it takes a hostname and attempts to resolve it (it will follow CNAME records if they exist until it finds an IP address) - this may result in multiple IP addresses so is returned as an array of addresses on success or "null" on failure (the locally configured DNS search list isn't checked, so you will need to specify the domain part as well). By default it will use the system DNS servers, but it will respect the "Custom Name Servers" field in the "IP Calc" pane, but will ignore the "DNS Search List". The optional second parameter allows you to control what records are returned on forward DNS lookups and can be one of the following values:</p>

          <p><strong>response_type = 0 || null</strong><br />
          This, or the default if omitted, will return both AAAA and A records (AAAA before A) when performing a forward DNS lookup.</p>

          <p><strong>response_type = 1</strong><br />
          This will return only A records and omit any AAAA records returned - this may result in a "null" response if no A records exist.</p>

          <p><strong>response_type = 2</strong><br />
          This will return only AAAA records and omit any A records returned - this may result in a "null" response if no AAAA records exist.</p>

          <p>In addition to being able to lookup a single address, it also supports being passed a list of IP addresses to resolve, with an array being returned with the results - on failure a single "null" will be returned. This could be used in the following way to lookup all usable hosts within a subnet by combining it with the <code>iphosts()</code> function (with a result per line):</p>

          <pre><span class="script">&lt;?= nslookup(iphosts("192.0.2.0/28")).join("\n") ?&gt;</span></pre>

          <p>An alternative way of doing the same thing, but with more control on the output would be using a FOR loop as follows:</p>

<pre><span class="for">&lt;FOR H = [<span class="script">&lt;?= iphosts("192.0.2.0/28") ?&gt;</span>]&gt;</span>
<span class="for">{{H}}</span> = <span class="script">&lt;?= nslookup("<span class="for">{{H}}</span>") ?&gt;</span>
<span class="for">&lt;/FOR&gt;</span>
</pre>
        </dd>
        <dt><strong>curl ("url", ["basic_auth_string"], [ignore_ssl_cert], [timeout])</strong></dt>
        <dd>
          <p>This function can be used to download http/https based content using the HTTP GET method. The only mandatory argument is "url" which is the same as what you would enter into your web browser (e.g. "https://www.google.com"). It supports HTTP Basic Authentication and if required can be invoked by providing a Base64 encoded string in the format of "username:password" as the "basic_auth_string" argument. HTTP Cookies are also supported and will persist for subsequent requests to the same server. If a HTTPS URL has been provided then it will check to ensure a valid trusted SSL certificate is being presented - you can override this behaviour by passing a value of "true" to the "ignore_ssl_cert" argument which will permit self-signed certificates to be accepted and bypass other security checks (this isn't advisable or recommended, but is provided out of necessity). The "timeout" argument can be used to specify a connection timeout in milliseconds - the default timeout is 5000 ms (5 seconds). At the moment this function only supports direct connections - the use of a proxy server isn't supported.</p>

          <p>On success this function will return the contents of the HTTP response as a string and on failure it will return one of following numerical error codes:</p>
          
          <p><strong>0</strong><br />
          An error occurred when trying to connect - the error message will be printed to the "Console" tab.</p>

          <p><strong>1</strong><br />
          A timeout occurred when trying to connect - this might be temporary and if you try again it might succeed, if not then try increasing the "timeout" value. </p>

          <p><strong>100 to 599</strong><br />
          The web server responded with a HTTP response code that wasn't 200.</p>

          <pre><span class="script">&lt;?
  var r = curl("http://templatefx.org");
  if (isNaN(r)) {
    // r = HTTP CONTENT
  }
  else if (r === 0) {
    // ERROR - SEE CONSOLE
  }
  else if (r === 1) {
    // TIMEOUT
  }
  else {
    // r = HTTP RESPONSE CODE
  }
?&gt;</span></pre>

          <p>The above example demonstrates how you can check for success or failure when using this function. We use the <code>isNaN()</code> function to determine if we have a numerical or textual response - it assumes any numerical only response is some sort of error.</p>
        </dd>
        <dt><strong>passwd ([length], ["chars"])</strong></dt>
        <dd>
          <p>This function generates a cryptographically strong random password using the following characters: a-z, A-Z, 0-9, unless a custom character set using the "chars" parameter has been provided. The length is determined by the passed "length" parameter or a length of 16 is used if the parameter is omitted.</p>
<pre><span class="comment"># Generate a random 12 character password using the provided characters</span>
<span class="script">&lt;?= passwd(12, "AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZZ") ?&gt;</span></pre>
        </dd>
        <dt><strong>rot13 ("string")</strong></dt>
        <dd>
          <p>This function encodes (or decodes) a "string" using "rot13". Not to be confused with any sort of encryption as it is a very basic substitution cipher which can be easily reversed. It could be used to encode strings to stop the casual passer-by from gleaning passwords from looking at your screen, if you feel it necessary to hard code them into your templates.</span>
        </dd>
        <dt><strong>banner ("text", ["pre_char"], ["fill_char"], ["charset"], ["post_char"])</strong></dt>
        <dd>
          <p>This function generates an ASCII banner with the provided "text" - this mimics the Unix "banner" utility which is found in some distributions. It currently supports two character sets: "regular" and "small" with "regular" being the default which provides 7x7 upper case characters and 6x6 lower case characters. The "small" character set provides a subset (<code>A-Z</code>, <code>0-9</code> and <code>-+.</code>) of characters in a slightly smaller 5x5 form factor.</p>

          <p>The "pre_char" argument is optional and allows you to specify a start of line character. In the same sense the "post_char" argument is also optional and allows you to specify an end of line character - both options can be specified as an empty string or null to use the default (nothing). The "fill_char" argument is also optional and will default to "#", but any character can be specified (even Unicode as per the example below). The "charset" argument allows you to switch between the two character sets. The following example demonstrates a banner using the text "TemplateFx" using the "FULL BLOCK (2588 in Hex)" UTF-8 character:</p>

          <pre><span class="script">&lt;?= banner("TemplateFx", null, "\u2588", "small") ?&gt;</span></pre>

          <p>The above syntax will be translated into the following banner in your output:</p>

          <pre>&#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;   &#9608;  &#9608;&#9608;&#9608;&#9608;   &#9608;       &#9608;&#9608;&#9608;   &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;   &#9608;
  &#9608;    &#9608;      &#9608;&#9608; &#9608;&#9608;  &#9608;   &#9608;  &#9608;      &#9608;   &#9608;    &#9608;    &#9608;      &#9608;       &#9608; &#9608;
  &#9608;    &#9608;&#9608;&#9608;    &#9608; &#9608; &#9608;  &#9608;&#9608;&#9608;&#9608;   &#9608;      &#9608;&#9608;&#9608;&#9608;&#9608;    &#9608;    &#9608;&#9608;&#9608;    &#9608;&#9608;&#9608;      &#9608;
  &#9608;    &#9608;      &#9608;   &#9608;  &#9608;      &#9608;      &#9608;   &#9608;    &#9608;    &#9608;      &#9608;       &#9608; &#9608;
  &#9608;    &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;   &#9608;  &#9608;      &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;   &#9608;    &#9608;    &#9608;&#9608;&#9608;&#9608;&#9608;  &#9608;      &#9608;   &#9608;</pre>
        </dd>

        <dt><strong>timestamp (["format"])</strong></dt>
        <dd>
          <p>This function generates a timestamp based on the current date and time, either based on a provided format (using the same format as Java's <a href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_blank">SimpleDateFormat</a> class) or using a default pattern if omitted.</p>
        </dd>
        <dt><strong>date ("date", "format", amount, ["dest_format"], ["field"])</strong></dt>
        <dd>
          <p>This function is used to manipulate dates by adding or subtracting a duration from a given date, or by converting one date format to another. The "date" field is used to pass a particular date string and the "format" field is used to specify the format of that given date (using the same format as Java's <a href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_blank">SimpleDateFormat</a> class). The "amount" field specifies the number of days (by default) to add or subtract from the given date - to subtract days, a negative number can be provided. On success it will return the manipulated date in the same format that was provided - you can specify a different output format using the "dest_format" optional parameter (using the same formatting rules). By default this function operates using days, but by specifying either "d" for days, "w" for weeks, "m" for months or "y" for years as the "field" parameter, the default behaviour can be changed.</p>
<pre><span class="comment"># Add 5 days to 27/04/2016 and output using dd/MMMM/yyyy (i.e. 02 May 2016)</span>
<span class="script">&lt;?= date("27/04/2016", "dd/MM/yyyy", 5, "dd MMMM yyyy") ?&gt;</span>

<span class="comment"># Subtract 7 days from 03/JAN/2016 and output using the same format (i.e. 25/Dec/2015)</span>
<span class="script">&lt;?= date("01/Jan/2016", "dd/MMM/yyyy", -7) ?&gt;</span>

<span class="comment"># Convert date 29/02/16 from dd/MM/yy to dd/MMM/yyyy (i.e. 29/Feb/2016)</span>
<span class="script">&lt;?= date("29/02/16", "dd/MM/yy", 0, "dd/MMM/yyyy") ?&gt;</span>

<span class="comment"># Add 5 weeks to 18/OCT/2014 and output using the same format (i.e. 22/Nov/2014)</span>
<span class="script">&lt;?= date("18/Oct/2014", "dd/MMM/yyyy", 5, null, "w") ?&gt;</span></pre>
        </dd>
        <dt><strong>add_output_mutation ("regex", "replacement")</strong></dt>
        <dd>
          <p>This function allows you to make changes to the output post generation before it is displayed. This function can be called at any point in your template, but it won't perform the changes until after the output has finished being generated. The replacements will be performed in the order they are added. This function could be used to insert information into your template that isn't known at the point where you want it inserted. As an example, you might want to add a section to your output which lists all the IP addresses which have been used in your output, however you won't being able to produce this list until after the output has been generated. You could leave a placeholder (i.e. "[PLACEHOLDER]") in the template and then use this function to update it at the end with the list of IP addresses that have been found by searching through the output using <code>templatefx.output</code>.</p>
        </dd>
        <dt><strong>console.log ("message")</strong></dt>
        <dd>
          <p>This function is used for console logging to aid troubleshooting. It will write the passed message to the console. This allows you to debug your templates to output the current value of a variable, etc in different places.</p>
        </dd>
      </dl>

      <h4 class="heading">7.3. External JavaScript Libraries</h4>

      <p>In addition to the built-in JavaScript variables and functions, TemplateFx also includes version 3.10.1 of the "<a href="https://lodash.com/" target="_blank">lodash.js</a>" JavaScript library - not enabled by default. This library is similar to "Underscore.js" and is a utility library delivering extra JavaScript functions for common tasks (using the "_" object) - full details on syntax and usage can be found in their <a href="https://github.com/lodash/lodash/blob/3.10.1/doc/README.md" target="_blank">API Documentation</a> - the example below shows the version of the library that has been included is as stated above.</p>

<pre><span class="script">&lt;?= _.VERSION ?&gt;</span></pre>
      
      <p>In addition to including this library in TemplateFx, I have also added support for globally including other JavaScript libraries. You can select the "JavaScript Libraries" menu item on the "File" menu to add or remove libraries - these are persistent across application restarts, enabled globally and will be available for every DataTemplate. If you have issues including some JavaScript libraries, I recommended you try with the latest version of the Java Runtime Environment - the JavaScript processing was greatly improved from Java 8 onwards with the Nashorn JavaScript Engine. By default TemplateFx will cache the loading of JavaScript Libraries on the first run (you can disable this by deselecting the "Cache JavaScript Libraries" option) - this is because Java seems to be getting slower and slower at parsing JavaScript with every release and this speeds things up a bit.</p>

      <br />
    </div>
  </body>
</html>
